(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4040],{138:(e,t,a)=>{"use strict";a.d(t,{default:()=>g});var r=a(5155),s=a(2115),n=a(7600),i=a(4643),o=a(4552),l=a(285),c=a(1976),d=a(7340),u=a(2138),h=a(5695),m=a(6874),p=a.n(m);function g(){let{user:e}=(0,n.A)(),{trackPageView:t}=(0,i.z)(),a=(0,h.useRouter)(),[m,g]=(0,s.useState)([]),[f,y]=(0,s.useState)(!0);(0,s.useEffect)(()=>{t("/favorites")},[t]),(0,s.useEffect)(()=>{e||a.push("/")},[e,a]),(0,s.useEffect)(()=>{e&&x()},[e]);let x=async()=>{try{y(!0);let e=await fetch("/api/user/favorites");if(e.ok){let t=await e.json();g(t.favorites)}}catch(e){console.error("Error fetching favorites:",e)}finally{y(!1)}},v=async e=>{try{(await fetch("/api/user/favorites",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({propertyId:e})})).ok&&g(m.filter(t=>t.propertyId!==e))}catch(e){console.error("Error removing favorite:",e)}};return e?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)(c.A,{className:"w-8 h-8 text-red-500"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Favorites"})]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Properties you've saved for later. Keep track of your dream homes and investment opportunities."})]}),f?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm animate-pulse",children:[(0,r.jsx)("div",{className:"aspect-[4/3] bg-gray-200 rounded-t-lg"}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-4 w-2/3"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-4"}),(0,r.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded flex-1"}),(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded flex-1"})]})]})]},t))}):0===m.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(c.A,{className:"w-12 h-12 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"No Favorites Yet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Start exploring our properties and save your favorites to keep track of the ones you love."}),(0,r.jsx)(l.$,{asChild:!0,children:(0,r.jsxs)(p(),{href:"/properties",children:[(0,r.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Browse Properties",(0,r.jsx)(u.A,{className:"w-4 h-4 ml-2"})]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("p",{className:"text-gray-600",children:[m.length," ",1===m.length?"property":"properties"," in your favorites"]})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(e=>(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.y,{property:e.property,showFavorite:!0,showShare:!0}),(0,r.jsx)("div",{className:"absolute top-4 right-4",children:(0,r.jsx)("button",{onClick:()=>v(e.propertyId),className:"bg-white/90 backdrop-blur-sm rounded-full p-2 shadow-lg hover:bg-white transition-colors",title:"Remove from favorites",children:(0,r.jsx)(c.A,{className:"w-5 h-5 text-red-500 fill-current"})})})]},e.id))}),(0,r.jsx)("div",{className:"mt-12 text-center",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-sm",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Ready to Take the Next Step?"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Contact us to schedule a visit or get more information about your favorite properties."}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,r.jsx)(l.$,{asChild:!0,children:(0,r.jsx)(p(),{href:"/contact",children:"Schedule Consultation"})}),(0,r.jsx)(l.$,{variant:"outline",asChild:!0,children:(0,r.jsxs)(p(),{href:"/properties",children:["Browse More Properties",(0,r.jsx)(u.A,{className:"w-4 h-4 ml-2"})]})})]})]})})]})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})}},1469:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return l},getImageProps:function(){return o}});let r=a(8229),s=a(1264),n=a(3063),i=r._(a(1193));function o(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let l=n.Image},1976:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},2138:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},2717:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("bath",[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]])},3911:(e,t,a)=>{Promise.resolve().then(a.bind(a,138))},4516:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4643:(e,t,a)=>{"use strict";a.d(t,{z:()=>o});var r=a(2115),s=a(7600),n=a(5695);let i=e=>{let t=new WeakSet,a=e=>{if(null==e||"object"!=typeof e)return e;if(e instanceof HTMLElement)return{tagName:e.tagName||"Unknown",id:e.id||void 0,className:e.className||void 0,type:"HTMLElement"};if(e instanceof Node)return{nodeType:e.nodeType,nodeName:e.nodeName||"Unknown",type:"Node"};if(e instanceof Event)return{type:e.type,target:e.target?a(e.target):void 0,eventType:"Event"};if("function"==typeof e)return{type:"Function",name:e.name||"anonymous"};if(t.has(e))return{type:"CircularReference"};t.add(e);try{if(Array.isArray(e))return e.map(e=>a(e));if(e instanceof Date)return e.toISOString();if(e instanceof RegExp)return{type:"RegExp",source:e.source,flags:e.flags};if(e instanceof Error)return{type:"Error",name:e.name,message:e.message,stack:e.stack};let t={};for(let[r,s]of Object.entries(e))if(!(r.startsWith("__react")||r.startsWith("_react")||r.includes("Fiber")))try{t[r]=a(s)}catch(e){t[r]={type:"SerializationError",error:"Failed to serialize"}}return t}catch(e){return{type:"SerializationError",error:"Failed to serialize object"}}};return a(e)};function o(){let{user:e}=(0,s.A)(),t=(0,n.usePathname)(),a=(0,r.useRef)(Date.now()),o=(0,r.useRef)(0),l=(0,r.useRef)(0),c=(0,r.useCallback)(async(t,a,r)=>{try{let s=i({...r,userId:null==e?void 0:e.id,userEmail:null==e?void 0:e.email,page:window.location.pathname,url:window.location.href,timestamp:new Date().toISOString(),sessionId:d()});await fetch("/api/track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:t,resource:a,metadata:s})})}catch(e){console.error("Tracking failed:",e)}},[e]),d=(0,r.useCallback)(()=>{let e=sessionStorage.getItem("tracking-session-id");return e||(e="sess_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36),sessionStorage.setItem("tracking-session-id",e)),e},[]),u=(0,r.useCallback)(e=>{let t=e||window.location.pathname;a.current=Date.now(),o.current=0,c("PAGE_VIEW",t,{title:document.title,referrer:document.referrer,userAgent:navigator.userAgent,screenResolution:"".concat(screen.width,"x").concat(screen.height),viewportSize:"".concat(window.innerWidth,"x").concat(window.innerHeight),language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})},[c]),h=(0,r.useCallback)(e=>{let t=Date.now()-a.current;c("PAGE_EXIT",e||window.location.pathname,{timeSpent:t,maxScrollDepth:o.current,exitType:"navigation"})},[c]),m=(0,r.useCallback)(()=>{let e=Math.round((window.pageYOffset||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-window.innerHeight)*100);e>o.current&&(o.current=e,e>=25&&l.current<25?c("SCROLL_DEPTH",window.location.pathname,{depth:25}):e>=50&&l.current<50?c("SCROLL_DEPTH",window.location.pathname,{depth:50}):e>=75&&l.current<75?c("SCROLL_DEPTH",window.location.pathname,{depth:75}):e>=90&&l.current<90&&c("SCROLL_DEPTH",window.location.pathname,{depth:90}),l.current=e)},[c]),p=(0,r.useCallback)((e,t)=>{c("PROPERTY_VIEW",e,{propertyTitle:t,viewStartTime:Date.now()})},[c]),g=(0,r.useCallback)((e,t)=>{c("PROPERTY_INQUIRY",e,{inquiryType:t,conversionPath:C()})},[c]),f=(0,r.useCallback)((e,t,a)=>{c("PROPERTY_SEARCH",void 0,{query:e,filters:t,results:a,searchTime:Date.now()})},[c]),y=(0,r.useCallback)((e,t)=>{c("LOCATION_VIEW",e,{locationName:t})},[c]),x=(0,r.useCallback)((e,t)=>{c("BLOG_VIEW",e,{blogTitle:t})},[c]),v=(0,r.useCallback)((e,t)=>{c("DOWNLOAD",e,{fileName:t,downloadSource:window.location.pathname})},[c]),w=(0,r.useCallback)((e,t)=>{c("CONTACT_SUBMIT",e,{...t,conversionPath:C()})},[c]),b=(0,r.useCallback)((e,t)=>{c("BUTTON_CLICK",e,{location:t,page:window.location.pathname})},[c]),k=(0,r.useCallback)(e=>{c("FORM_START",e,{page:window.location.pathname})},[c]),N=(0,r.useCallback)((e,t)=>{c("FORM_COMPLETE",e,{success:t,page:window.location.pathname})},[c]),j=(0,r.useCallback)(e=>{c("USER_REGISTER",e,{registrationSource:window.location.pathname})},[c]),E=(0,r.useCallback)(e=>{c("USER_LOGIN",e,{loginSource:window.location.pathname})},[c]),S=(0,r.useCallback)(e=>{c("EMAIL_SUBSCRIBE",e,{subscriptionSource:window.location.pathname})},[c]),C=(0,r.useCallback)(()=>{let e=sessionStorage.getItem("user-journey")||"[]";try{return JSON.parse(e)}catch(e){return[]}},[]),A=(0,r.useCallback)(e=>{let t=C();t.push({page:e,timestamp:Date.now(),title:document.title}),t.length>20&&t.shift(),sessionStorage.setItem("user-journey",JSON.stringify(t))},[C]);return(0,r.useEffect)(()=>{u(),A(t);let e=()=>m();window.addEventListener("scroll",e,{passive:!0});let a=()=>h();return window.addEventListener("beforeunload",a),()=>{window.removeEventListener("scroll",e),window.removeEventListener("beforeunload",a),h()}},[t,u,h,m,A]),{track:c,trackPageView:u,trackPageExit:h,trackScrollDepth:m,trackPropertyView:p,trackPropertyInquiry:g,trackSearch:f,trackLocationView:y,trackBlogView:x,trackDownload:v,trackContact:w,trackButtonClick:b,trackFormStart:k,trackFormComplete:N,trackUserRegistration:j,trackUserLogin:E,trackEmailSubscribe:S,getConversionPath:C}}},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"notFound")&&a.d(t,{notFound:function(){return r.notFound}}),a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},6516:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},6643:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]])},6766:(e,t,a)=>{"use strict";a.d(t,{default:()=>s.a});var r=a(1469),s=a.n(r)},7340:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},7918:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[3455,6874,3063,4552,8441,1684,7358],()=>t(3911)),_N_E=e.O()}]);