(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7679],{285:(e,s,t)=>{"use strict";t.d(s,{$:()=>d});var r=t(5155),a=t(2115),i=t(9708),n=t(2085),c=t(9434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-white transition-all duration-300 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-gray-900 text-white hover:bg-gray-800 shadow-sm hover:shadow-md",destructive:"bg-red-500 text-white hover:bg-red-600 shadow-sm hover:shadow-md",outline:"border border-gray-200 bg-white text-gray-700 hover:bg-gray-50 shadow-sm hover:shadow-md",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 shadow-sm",ghost:"hover:bg-gray-100 hover:text-gray-900 transition-colors duration-300",link:"text-gray-700 underline-offset-4 hover:underline hover:text-gray-900 transition-colors duration-300"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,s)=>{let{className:t,variant:a,size:n,asChild:d=!1,...o}=e,x=d?i.DX:"button";return(0,r.jsx)(x,{className:(0,c.cn)(l({variant:a,size:n,className:t})),ref:s,...o})});d.displayName="Button"},1007:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1232:(e,s,t)=>{Promise.resolve().then(t.bind(t,7589))},1788:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},2657:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3904:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4516:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7589:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var r=t(5155),a=t(2115),i=t(3904),n=t(1788),c=t(7924),l=t(1007),d=t(9074),o=t(4516),x=t(2657),m=t(285);function h(){let[e,s]=(0,a.useState)([]),[t,h]=(0,a.useState)([]),[u,g]=(0,a.useState)(!0),[p,y]=(0,a.useState)("activities"),[v,f]=(0,a.useState)(""),[j,N]=(0,a.useState)("7");(0,a.useEffect)(()=>{w()},[j]);let w=async()=>{g(!0);try{let[e,t]=await Promise.all([fetch("/api/admin/tracking/activities?days=".concat(j)),fetch("/api/admin/tracking/pageviews?days=".concat(j))]);if(e.ok){let t=await e.json();s(t.activities)}if(t.ok){let e=await t.json();h(e.pageViews)}}catch(e){console.error("Error fetching tracking data:",e)}finally{g(!1)}},b=e.filter(e=>{var s,t;return e.action.toLowerCase().includes(v.toLowerCase())||(null==(s=e.user)?void 0:s.email.toLowerCase().includes(v.toLowerCase()))||(null==(t=e.resource)?void 0:t.toLowerCase().includes(v.toLowerCase()))}),k=t.filter(e=>{var s;return e.path.toLowerCase().includes(v.toLowerCase())||(null==(s=e.ipAddress)?void 0:s.toLowerCase().includes(v.toLowerCase()))}),A=e=>{switch(e){case"USER_LOGIN":return"bg-green-100 text-green-800";case"USER_REGISTER":return"bg-blue-100 text-blue-800";case"PROPERTY_VIEW":return"bg-purple-100 text-purple-800";case"PROPERTY_SEARCH":return"bg-yellow-100 text-yellow-800";case"EMAIL_SUBSCRIBE":return"bg-pink-100 text-pink-800";case"PROPERTY_INQUIRY":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=e=>e?e.includes("Chrome")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")?"Safari":e.includes("Edge")?"Edge":"Other":"Unknown";return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"User Tracking"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Monitor user activities and page views in real-time"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)(m.$,{onClick:w,variant:"outline",size:"sm",children:[(0,r.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,r.jsxs)(m.$,{variant:"outline",size:"sm",children:[(0,r.jsx)(n.A,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Search activities, users, or resources...",value:v,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"})]})}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900",children:[(0,r.jsx)("option",{value:"1",children:"Last 24 hours"}),(0,r.jsx)("option",{value:"7",children:"Last 7 days"}),(0,r.jsx)("option",{value:"30",children:"Last 30 days"}),(0,r.jsx)("option",{value:"90",children:"Last 90 days"})]})})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,r.jsxs)("button",{onClick:()=>y("activities"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("activities"===p?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["User Activities (",b.length,")"]}),(0,r.jsxs)("button",{onClick:()=>y("pageviews"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("pageviews"===p?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Page Views (",k.length,")"]})]})}),(0,r.jsx)("div",{className:"p-6",children:u?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):(0,r.jsxs)(r.Fragment,{children:["activities"===p&&(0,r.jsx)("div",{className:"space-y-4",children:b.length>0?b.map(e=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"w-5 h-5 text-gray-600"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(A(e.action)),children:e.action.replace("_"," ")}),e.resource&&(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["â†’ ",e.resource]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:e.user?(0,r.jsx)("span",{className:"font-medium",children:e.user.name||e.user.email}):(0,r.jsx)("span",{className:"text-gray-500",children:"Anonymous user"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(d.A,{className:"w-3 h-3 mr-1"}),new Date(e.createdAt).toLocaleString()]}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(o.A,{className:"w-3 h-3 mr-1"}),e.ipAddress||"Unknown IP"]}),(0,r.jsx)("span",{children:C(e.userAgent)})]})]})]})}),e.metadata&&(0,r.jsx)("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:(0,r.jsx)("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:JSON.stringify(JSON.parse(e.metadata),null,2)})})]},e.id)):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(x.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No activities found"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"No user activities match your current filters."})]})}),"pageviews"===p&&(0,r.jsx)("div",{className:"space-y-4",children:k.length>0?k.map(e=>(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(x.A,{className:"w-5 h-5 text-blue-600"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.path}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(d.A,{className:"w-3 h-3 mr-1"}),new Date(e.createdAt).toLocaleString()]}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(o.A,{className:"w-3 h-3 mr-1"}),e.ipAddress||"Unknown IP"]}),(0,r.jsx)("span",{children:C(e.userAgent)})]}),e.referrer&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Referrer: ",e.referrer]})]})]})},e.id)):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(x.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No page views found"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"No page views match your current filters."})]})})]})})]})]})}},7924:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9074:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i,oG:()=>l,rr:()=>c,vv:()=>n});var r=t(2596),a=t(9688);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,r.$)(s))}function n(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function c(e,s){let t=s?encodeURIComponent(s):"";return"https://wa.me/".concat(e.replace(/[^\d]/g,"")).concat(t?"?text=".concat(t):"")}function l(){window.scrollTo({top:0,behavior:"smooth"})}}},e=>{var s=s=>e(e.s=s);e.O(0,[3455,8441,1684,7358],()=>s(1232)),_N_E=e.O()}]);