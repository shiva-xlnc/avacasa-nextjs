(()=>{var e={};e.id=9769,e.ids=[9769],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5069:(e,t,r)=>{"use strict";r.d(t,{zR:()=>a});var s=r(38824);let a=globalThis.prisma??new s.PrismaClient},5502:(e,t,r)=>{"use strict";r.d(t,{Bm:()=>n,Hy:()=>c,RA:()=>p});var s=r(5069);let a={siteName:"Avacasa",siteDescription:"Premium Real Estate Platform for Holiday Homes and Investment Properties",siteUrl:"https://avacasa.life",contactEmail:"contact@avacasa.life",contactPhone:"+91 9876543210",address:"Mumbai, Maharashtra, India",metaTitle:"Avacasa - Premium Real Estate Platform",metaDescription:"Discover premium holiday homes, farmlands, and investment properties. Your trusted partner in real estate investment.",metaKeywords:"real estate, holiday homes, farmland, investment properties, Mumbai, Maharashtra",ogImage:"/images/og-image.jpg",emailFrom:"noreply@avacasa.life",emailHost:"smtp.gmail.com",emailPort:"587",emailPassword:"",adminEmail:"admin@avacasa.life",googleAnalyticsId:"",facebookPixelId:"",trackingEnabled:!0,maintenanceMode:!1,allowRegistration:!0,requireEmailVerification:!0,maxLoginAttempts:5,sessionTimeout:24,featuredPropertiesLimit:6,blogPostsPerPage:9,enableComments:!0,moderateComments:!0,emailNotifications:!0,smsNotifications:!1,pushNotifications:!1,primaryColor:"#1f2937",secondaryColor:"#3b82f6",logoUrl:"/images/logo.png",faviconUrl:"/favicon.ico",facebookUrl:"",twitterUrl:"",instagramUrl:"",linkedinUrl:"",youtubeUrl:""},i=null,o=0;async function n(){try{let e=Date.now();if(i&&e-o<3e5)return i;let t=await s.zR.siteSettings.findUnique({where:{id:"settings"}}),r=a;if(t)try{let e=JSON.parse(t.data);r={...a,...e}}catch(e){console.error("Failed to parse settings data:",e)}return i=r,o=e,r}catch(e){return console.error("Failed to get site settings:",e),a}}function c(){i=null,o=0}async function p(){let e=await n();return{featuredPropertiesLimit:e.featuredPropertiesLimit,blogPostsPerPage:e.blogPostsPerPage,enableComments:e.enableComments,moderateComments:e.moderateComments}}},7066:e=>{"use strict";e.exports=require("node:tty")},8216:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>d,serverHooks:()=>h,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{GET:()=>m});var a=r(96559),i=r(48088),o=r(37719),n=r(32190),c=r(5069),p=r(45697),u=r(5502);let l=p.z.object({location:p.z.string().optional(),minPrice:p.z.coerce.number().optional(),maxPrice:p.z.coerce.number().optional(),propertyType:p.z.string().optional(),bedrooms:p.z.coerce.number().optional(),page:p.z.coerce.number().default(1),limit:p.z.coerce.number().default(12),featured:p.z.coerce.boolean().optional(),search:p.z.string().optional()});async function m(e){try{let{searchParams:t}=new URL(e.url),r=l.parse(Object.fromEntries(t)),s=await (0,u.RA)(),a=r.limit;!0===r.featured&&(a=Math.min(r.limit,s.featuredPropertiesLimit));let i={...r.location&&{locationId:r.location},...r.propertyType&&{propertyType:r.propertyType},...r.bedrooms&&{bedrooms:{gte:r.bedrooms}},...r.minPrice&&{price:{gte:r.minPrice}},...r.maxPrice&&{price:{lte:r.maxPrice}},...void 0!==r.featured&&{featured:r.featured},...r.search&&{OR:[{title:{contains:r.search,mode:"insensitive"}},{description:{contains:r.search,mode:"insensitive"}},{location:{name:{contains:r.search,mode:"insensitive"}}}]},status:"AVAILABLE"},[o,p]=await Promise.all([c.zR.property.findMany({where:i,include:{location:!0},skip:(r.page-1)*a,take:a,orderBy:[{featured:"desc"},{createdAt:"desc"}]}),c.zR.property.count({where:i})]),m=o.map(e=>({...e,images:JSON.parse(e.images||"[]"),amenities:JSON.parse(e.amenities||"[]"),features:JSON.parse(e.features||"[]"),coordinates:e.coordinates?JSON.parse(e.coordinates):null}));return n.NextResponse.json({success:!0,data:m,pagination:{page:r.page,limit:a,total:p,pages:Math.ceil(p/a)},settings:!0===r.featured?{featuredPropertiesLimit:s.featuredPropertiesLimit}:void 0})}catch(e){return console.error("Error fetching properties:",e),n.NextResponse.json({success:!1,error:"Failed to fetch properties",message:e instanceof Error?e.message:"Unknown error"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/properties/route",pathname:"/api/properties",filename:"route",bundlePath:"app/api/properties/route"},resolvedPagePath:"/Users/akashsharma/AkashDocs/avacasa/avacasa-nextjs/src/app/api/properties/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:g,serverHooks:h}=d;function x(){return(0,o.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:g})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{"use strict";e.exports=require("node:child_process")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48161:e=>{"use strict";e.exports=require("node:os")},51455:e=>{"use strict";e.exports=require("node:fs/promises")},55511:e=>{"use strict";e.exports=require("crypto")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},78335:()=>{},78474:e=>{"use strict";e.exports=require("node:events")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4243,580,2668,5697,8824],()=>r(8216));module.exports=s})();