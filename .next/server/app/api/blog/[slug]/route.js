(()=>{var e={};e.id=6618,e.ids=[6618],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5069:(e,r,s)=>{"use strict";s.d(r,{zR:()=>o});var t=s(38824);let o=globalThis.prisma??new t.PrismaClient},7066:e=>{"use strict";e.exports=require("node:tty")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{"use strict";e.exports=require("node:child_process")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48161:e=>{"use strict";e.exports=require("node:os")},51145:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>h,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>g});var t={};s.r(t),s.d(t,{GET:()=>c,POST:()=>p});var o=s(96559),a=s(48088),i=s(37719),u=s(32190),n=s(5069);async function c(e,{params:r}){try{let{slug:e}=await r,s=await n.zR.blogPost.findUnique({where:{slug:e,status:"PUBLISHED",active:!0},select:{id:!0,title:!0,slug:!0,content:!0,excerpt:!0,author:!0,category:!0,tags:!0,featuredImage:!0,featured:!0,views:!0,publishedAt:!0,createdAt:!0}});if(!s)return u.NextResponse.json({success:!1,error:"Post not found"},{status:404});let t={...s,tags:s.tags?JSON.parse(s.tags):[]},o=await n.zR.blogPost.findMany({where:{category:s.category,slug:{not:e},status:"PUBLISHED",active:!0},orderBy:{publishedAt:"desc"},take:3,select:{id:!0,title:!0,slug:!0,excerpt:!0,author:!0,category:!0,featuredImage:!0,publishedAt:!0}});return u.NextResponse.json({success:!0,data:t,relatedPosts:o})}catch(e){return console.error("Blog post fetch error:",e),u.NextResponse.json({success:!1,error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function p(e,{params:r}){try{let{slug:e}=await r,s=await n.zR.blogPost.update({where:{slug:e,status:"PUBLISHED",active:!0},data:{views:{increment:1}},select:{views:!0}});return u.NextResponse.json({success:!0,views:s.views,message:"View tracked successfully"})}catch(e){return console.error("Blog post update error:",e),u.NextResponse.json({success:!1,error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/blog/[slug]/route",pathname:"/api/blog/[slug]",filename:"route",bundlePath:"app/api/blog/[slug]/route"},resolvedPagePath:"/Users/akashsharma/AkashDocs/avacasa/avacasa-nextjs/src/app/api/blog/[slug]/route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:l,workUnitAsyncStorage:g,serverHooks:x}=d;function h(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:g})}},51455:e=>{"use strict";e.exports=require("node:fs/promises")},55511:e=>{"use strict";e.exports=require("crypto")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},78335:()=>{},78474:e=>{"use strict";e.exports=require("node:events")},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[4243,580,2668,8824],()=>s(51145));module.exports=t})();